/* Copyright (C) 2013 Justin Windle, http://soulwire.co.uk */
var fit=function(){"use strict";function t(t){return t.toUpperCase()}function e(t){return"number"==typeof t&&!isNaN(t)}function i(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function n(e){if(!c)for(var i,n=F(A.body),r=p,o=0,a=y.length;a>o&&(c=y[o],i=c+r,!(i in n))&&(c=c.replace(/^(\w)/,t),i=c+r,!(i in n));o++);return c+e}function r(t){var e=F(t),i=e[n(p)].replace(/[a-z()]/gi,"").split(",");if(i.length<6)return[1,0,0,1,0,0];for(var r=0;6>r;r++)i[r]=parseFloat(i[r]);return i}function o(t,e){var i=r(e);i[0]=t.scale,i[3]=t.scale,i[4]+=t.tx,i[5]+=t.ty,e.style[n(g)]="0 0",e.style[n(p)]="matrix("+i.join(",")+")"}function a(t,e){var i=F(e),n=parseFloat(i.left)||0,r=parseFloat(i.top)||0;"static"===i.position&&(e.style.position="relative"),e.style.left=n+t.tx+w,e.style.top=r+t.ty+w,e.style.height=t.height+w,e.style.width=t.width+w}function l(t,e){var i=F(e),n=parseFloat(i.marginLeft)||0,r=parseFloat(i.marginTop)||0;e.style.marginLeft=n+t.tx+w,e.style.marginTop=r+t.ty+w,e.style.height=t.height+w,e.style.width=t.width+w}function s(t,e){e.height*=t.scale,e.width*=t.scale,e.x+=t.tx,e.y+=t.ty}function f(t){if(t instanceof HTMLElement){var i=t.getBoundingClientRect();t={height:t.offsetHeight,width:t.offsetWidth,x:i.left,y:i.top}}return!e(t.x)&&e(t.left)&&(t.x=t.left),!e(t.y)&&e(t.top)&&(t.x=t.top),t}function h(t,e,n,r){if(!t||!e)throw"You must supply a target and a container";"function"==typeof n&&(r=n,n={}),n=i(n||{},{hAlign:u,vAlign:u,cover:!1,apply:!0});var a=f(t),l=f(e),h=a.width,c=a.height,g=l.width,p=l.height,y=g/h,m=p/c,x=h/c,w=g/p,T=n.cover?m:y,A=n.cover?y:m,F=x>=w?T:A,E=h*F,L=c*F,b=n.hAlign==u?.5*(E-g):n.hAlign==d?E-g:0,C=n.vAlign==u?.5*(L-p):n.vAlign==v?L-p:0,H={tx:l.x-b-a.x,ty:l.y-C-a.y,x:l.x-b-a.x*F,y:l.y-C-a.y*F,height:a.height*F,width:a.width*F,scale:F};return r?r(H,t):n.apply&&(r=t instanceof HTMLElement?o:s)(H,t),H}var c,g="TransformOrigin",p="Transform",y="moz ms o webkit".split(" "),u="center",v="bottom",d="right",m="left",x="top",w="px",T=window||self,A=document,F=T.getComputedStyle;return i(h,{cssTransform:o,cssPosition:a,cssMargin:l,CENTER:u,BOTTOM:v,RIGHT:d,LEFT:m,TOP:x})}();